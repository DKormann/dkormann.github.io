var N=Object.defineProperty;var W=(s,e,t)=>e in s?N(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var y=(s,e,t)=>(W(s,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerpolicy&&(r.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?r.credentials="include":i.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();const d=(s,e,t,n)=>{const i=document.createElement(s);return i.innerText=e,t&&i.classList.add(...t.split(".").filter(r=>r)),n&&Object.entries(n).forEach(([r,o])=>{r==="children"?o.forEach(c=>i.appendChild(c)):r==="eventListeners"?Object.entries(o).forEach(([c,u])=>{i.addEventListener(c,u)}):r==="color"||r==="background"?i.style[r]=o:i[r]=o}),i},h={Tinygrad:{tags:["Machine Learning","AI","Software Infrastructure","Deep Learning","Compiler","Python"],content:"working on a deep learning framework"},"Immorise AI":{tags:["AI","Software Infrastructure","Deep Learning","Computer Vision","Image Processing","Python","Architecture"],content:"shape generation through token sampling"},"Sciepedia Website":{tags:["Web Development","Software Infrastructure","TypeScript","HTML","CSS","Vite","Database","Deployment"],content:"Obsidian notes with a twist and scripting integration"},"HVM: parallizing symbolic AI":{tags:["AI","Software Infrastructure","Symbolic AI","Parallelization","GPU","Compiler","Haskell"],content:"HVM developed by HigherOrderCo.com project is truly impressive in multiple regards: "},"Shader Play":{tags:["Web Development","Software Infrastructure","TypeScript","Compilers","HTML","Deployment"],content:"Shaderplay tries to bring shader development into typescript"},"Panda Farm":{tags:["Web Development","Software Infrastructure","TypeScript","Compilers","HTML","Deployment"],content:"playing games with a serious infrastructure"}},B={"3 highlights":[h.Tinygrad,h["Immorise AI"],h.HVM],"Machine Learning":[h.Tinygrad,h["Immorise AI"],h.HVM],Compilers:[h.HVM,h.Tinygrad],"Blog & Fun":[h.HVM,h.Tinygrad]};let U=0;const J=(s,e)=>{if(s.vectype==e)return s;if(s.vectype!=1)throw new Error("upcast not implemented for dtype "+s.vectype+" to "+e);return{op:"vec",srcs:Array.from({length:e},()=>s),vectype:e}},Y=s=>{const e=Math.max(...s.map(t=>t.vectype));return{srcs:s.map(t=>J(t,e)),vectype:e}};class K{constructor(e){return new Proxy(this,{get(n,i){if(typeof i=="string"){const r=Array.from(i).map(o=>o.charCodeAt(0)-"x".charCodeAt(0)).filter(o=>o>=0&&o<4).map(o=>e.get(o));return f(...r)}throw new Error(`FieldGetter: unknown field: ${i.toString()}`)}})}}const f=(...s)=>x(s),x=s=>{if(s instanceof Array){let e=s.map(x),t=e.reduce((i,r)=>i+r.vectype,0);if(t>4)throw new Error("gather: too many or too big vectors: "+e.map(i=>i.vectype).join(","));if(e.length==1)return e[0];let n=new l({op:"vec",srcs:e.map(i=>i.ast),vectype:t});return e.forEach(i=>i.parents.forEach(r=>n.parents.add(r))),n}return s instanceof l?s:(typeof s=="number"&&(s={op:"const",value:s,vectype:1,srcs:[]}),new l(s))};class l{constructor(e){y(this,"ast");y(this,"vectype");y(this,"parents");y(this,"onclick");y(this,"fields");this.ast=e,this.vectype=e.vectype,this.fields=new K(this),this.parents=new Set([this])}static fromVecs(e,t){const{srcs:n,vectype:i}=Y(e.map(o=>o.ast));let r=new l({op:t,srcs:n,vectype:i});return e.forEach(o=>o.parents.forEach(c=>r.parents.add(c))),r}static from(e,t){const n=e.map(x);return l.fromVecs(n,t)}sin(){return l.from([this],"sin")}cos(){return l.from([this],"cos")}tan(){return l.from([this],"tan")}log(){return l.from([this],"log")}exp(){return l.from([this],"exp")}add(...e){return l.from([this,e],"add")}sub(...e){return l.from([this,e],"sub")}mul(...e){return l.from([this,e],"mul")}lt(...e){return l.from([this,e],"lt")}div(...e){return l.from([this,e],"div")}mod(...e){return l.from([this,e],"mod")}pow(e){return l.from([this,e],"pow")}atan(...e){return l.from([this,e],"atan")}clamp(e,t){return l.from([this,e,t],"clamp")}dot(e){return this.mul(e).sum()}abs(){return this.square().sqrt()}mix(e,t){let n=this.clamp(0,1);return n.mul(e).add(x(1).sub(n).mul(t))}where(e,t){return this.lt(0).mix(t,e)}get(e){if(e>=this.vectype)throw new Error("index out of bounds");let t=new l({op:"index",srcs:[this.ast],value:e,vectype:1});return this.parents.forEach(n=>t.parents.add(n)),t}length(){return this.square().sum().sqrt()}normalize(){return this.div(this.length())}reduce(e){let t=this.get(0);for(let n=1;n<this.vectype;n++)t=e(t,this.get(n));return t}gt(e){return this.lt(e).complement()}maximum(e){let t=this.lt(e);return t.mul(e).add(f(1).sub(t).mul(this))}minimum(e){return this.inv().maximum(f(e).inv()).inv()}complement(){return f(1).sub(this)}sum(){return this.reduce((e,t)=>e.add(t))}prod(){return this.reduce((e,t)=>e.mul(t))}max(){return this.reduce((e,t)=>e.maximum(t))}min(){return this.reduce((e,t)=>e.minimum(t))}sqrt(){return this.pow(.5)}square(){return this.pow(2)}inv(){return this.pow(-1)}neg(){return this.mul(-1)}sub1(){return f(1).sub(this)}tanh(){let e=this.exp(),t=e.inv();return e.sub(t).div(e.add(t))}atanh(){return this.add(1).div(this.sub1()).log().mul(.5)}sigmoid(){return this.neg().exp().add(1).inv()}compute(e=[0,0]){return V(this)(e)}frac(){return this.mod(1)}floor(){return this.sub(this.frac())}steps(e){return this.mul(e).floor().div(e)}}const M=s=>{const e=new Map,t=[];function n(i){if(e.has(i)){let u=e.get(i);return u.usecount+=1,u}const r=i.srcs.map(n),o=i.op=="varying"||i.op=="uniform"?i.name:"x"+t.length,c={ast:i,srcs:r,name:o,usecount:1};return t.push(c),e.set(i,c),c}return n(s),t},X=s=>{function e(n){return n.ast.op=="const"||n.usecount<=1?t(n):n.name}function t(n){const i=n.ast.op;if(i=="uniform"||i=="varying")return n.name;if(i=="const"){let c=n.ast.value.toString();return c.includes(".")||(c+=".0"),c}const r=["float","vec2","vec3","vec4"][n.ast.vectype-1];if(i=="vec")return`${r}(${n.srcs.map(c=>e(c)).join(",")})`;if(i=="index")return`${e(n.srcs[0])}.${["x","y","z","w"][n.ast.value]}`;if(i=="add")return`(${e(n.srcs[0])} + ${e(n.srcs[1])})`;if(i=="sub")return`(${e(n.srcs[0])} - ${e(n.srcs[1])})`;if(i=="mul")return`(${e(n.srcs[0])} * ${e(n.srcs[1])})`;if(i=="div")return`(${e(n.srcs[0])} / ${e(n.srcs[1])})`;if(i=="mod")return`mod(${e(n.srcs[0])}, ${e(n.srcs[1])})`;if(i=="lt")return o((c,u)=>`${c} < ${u} ? 1.0 : 0.0`);function o(c){const[u,p]=n.srcs.map(e);if(n.srcs[0].ast.vectype==1)return`(${c(u,p)})`;const a=[];for(let g=0;g<n.srcs[0].ast.vectype;g++){const m=["x","y","z","w"][g];a.push(`${c(`${u}.${m}`,`${p}.${m}`)}`)}return`${r}(${a.join(", ")})`}return`${i}(${n.srcs.map(c=>e(c)).join(", ")})`}return s.map(n=>["uniform","varying","const"].includes(n.ast.op)||n.usecount<=1?"":`${["float","vec2","vec3","vec4"][n.ast.vectype-1]} ${n.name} = ${t(n)};
`).join("")+"gl_FragColor = "+t(s[s.length-1])+";"};class $ extends l{constructor(t){const n="input"+U++;super({op:"uniform",vectype:t,srcs:[],name:n});y(this,"value");y(this,"subscribers",new Set);y(this,"name");this.name=n,this.value=Array.from({length:t},()=>0)}set(...t){if(t.length!=this.vectype)throw new Error("Input.set: wrong number of arguments");this.value=t,this.subscribers.forEach(n=>n(t))}subscribe(t){t(this.value),this.subscribers.add(t)}update(t){this.set(...t(this.value))}}const _=(s,e)=>new l({op:"varying",name:s,vectype:e,srcs:[]}),P=new $(2),L=new $(2),T=new $(2),F=_("gl_FragCoord",4);F.fields.xy.div(P);const Q=F.fields.xy.add(T);L.set(window.innerWidth,window.innerHeight);const Z=s=>{let e=M(s.ast);function t(r){return r.ast.op=="uniform"?r.name:r.ast.op=="const"?r.ast.value.toString():r.name}function n(r){const o=r.ast.op,c=r.srcs.map(t),u=a=>{let g=[];if(r.ast.vectype==1)return a(c);for(let m=0;m<r.ast.vectype;m++)g.push(a(c.map(w=>`${w}[${m}]`)));return`[${g.join(",")}]`},p=a=>u(g=>a+"("+g.join(",")+")");switch(o){case"uniform":case"varying":return r.name;case"const":return r.ast.value.toString();case"vec":return`[${c.join(",")}].flat()`;case"index":return`${n(r.srcs[0])}[${r.ast.value}]`;case"add":return u(a=>a.join(" + "));case"mul":return u(a=>a.join(" * "));case"sub":return u(a=>`(${a[0]} - ${a[1]})`);case"div":return u(a=>`(${a[0]} / ${a[1]})`);case"mod":return u(a=>`(${a[0]} % ${a[1]})`);case"pow":return u(a=>`(${a[0]} ** ${a[1]})`);case"lt":return u(a=>`(${a[0]} < ${a[1]} ? 1. : 0.)`);case"atan":return p("Math.atan2");case"sin":return p("Math.sin");case"cos":return p("Math.cos");case"tan":return p("Math.tan");case"log":return p("Math.log");case"exp":return p("Math.exp");case"clamp":return u(a=>`Math.min(Math.max(${a[0]}, ${a[1]}), ${a[2]})`);default:throw new Error("JSCompiler: unknown op "+o)}}return"  "+e.map(r=>["uniform","varying","const"].includes(r.ast.op)?"":`const ${r.name} = ${n(r)};
  `).join("")+"return "+e[e.length-1].name},V=s=>{let e=Array.from(s.parents).filter(n=>n.ast.op=="uniform");const t=new Function("gl_FragCoord",...Array.from(e).map(n=>n.name),Z(s));return n=>t(n,...Array.from(e).map(i=>i.value))},R=[],j=(s,...e)=>{let t=f(...e);t.vectype==1&&(t=f(t,t,t)),t.vectype==2&&(t=f(t,0)),t.vectype==3&&(t=f(t,1)),s.addEventListener("click",o=>{let c=s.clientHeight-o.offsetY,u=o.offsetX;t.parents.forEach(p=>{p.onclick&&console.log(`${p.onclick} = [${p.compute([u,c])}]`)})});const n=M(t.ast),i=Array.from(t.parents).filter(o=>o.ast.op=="uniform"),r=s.getContext("webgl2");{if(!r)throw new Error("webgl not suppported");const o=(m,w)=>{const v=r.createShader(w);if(r.shaderSource(v,m),r.compileShader(v),!r.getShaderParameter(v,r.COMPILE_STATUS))throw new Error(r.getShaderInfoLog(v));return v},c=`
    attribute vec2 a_position;
    void main() {
      gl_Position = vec4(a_position, 0, 1);
    }`,u=`
precision mediump float;
${i.map(m=>`uniform ${["float","vec2","vec3","vec4"][m.ast.vectype-1]} ${m.name};`).join(`
`)}


void main() {

${X(n)}

}`,p=r.createProgram();if(r.attachShader(p,o(c,r.VERTEX_SHADER)),r.attachShader(p,o(u,r.FRAGMENT_SHADER)),r.linkProgram(p),!r.getProgramParameter(p,r.LINK_STATUS))throw new Error(r.getProgramInfoLog(p));r.useProgram(p);const a=r.getAttribLocation(p,"a_position"),g=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,g),r.bufferData(r.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,1]),r.STATIC_DRAW),r.enableVertexAttribArray(a),r.vertexAttribPointer(a,2,r.FLOAT,!1,0,0),i.forEach(m=>{const w=m.ast,v=r.getUniformLocation(p,w.name);m.subscribe(A=>{w.vectype==1?r.uniform1f(v,...A):w.vectype==2?r.uniform2f(v,...A):w.vectype==3?r.uniform3f(v,...A):r.uniform4f(v,...A)})})}R.push(()=>{const o=s.getBoundingClientRect();T.set(o.left,window.innerHeight-o.top-o.height),s.width=o.width,s.height=o.height,P.set(s.width,s.height),r.viewport(0,0,s.width,s.height),r.drawArrays(r.TRIANGLE_STRIP,0,4)})},ee=()=>{R.forEach(s=>s())},S=document.body;S.appendChild(d("h1","homepage",""));S.appendChild(d("h2","dominik kormann",""));S.appendChild(d("h3","I simply love software.",""));const H=d("input","","search");H.placeholder="Search for topics";S.appendChild(H);const k=d("canvas","","mainRender");S.appendChild(k);const D=new $(1);let b=Q.sub(L.div(2)).div(L.min().div(2)),E=new $(3),C=new $(3),I=new $(3);const O=s=>{s.matches?(E.set(0,0,.4),C.set(.2,0,0),I.set(0,0,0)):(E.set(.5,.5,.9),C.set(.5,.9,.5),I.set(.9,.9,.9))};O(window.matchMedia("(prefers-color-scheme: dark)"));window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",O);b=f(b.fields.x.atan(b.fields.y),b.length().log().sub(D.div(2)));for(let s=0;s<10;s++)b=b.add(b.fields.yx.mul(1+s,2+s).sin().div(2+s));let q=f(0,1,2).add(b.fields.x).sin().square();const z=(s,e,t,n)=>{const i=s.normalize();return e.mul(i.fields.x).add(t.mul(i.fields.y)).add(n.mul(i.fields.z))};j(k,z(q,E,C,I));const te=(s,e,t)=>{const n=d("div","","topicbox"),i=d("canvas","","topicshader");let r=z(q,C,E,I);return j(i,r),n.appendChild(i),n.style.backgroundColor=s,n.appendChild(d("h2",e,"")),n},re=d("div","","topics",{children:Object.entries(B).map((s,e)=>te("",s[0]))});S.appendChild(re);const ne=(s,e)=>{const t=d("div","","contentSection");return t.appendChild(d("h2",s,"")),t};Object.entries(h).forEach(([s,e])=>{S.appendChild(ne(s,e.content))});const G=s=>{D.set(s/1e3),ee(),requestAnimationFrame(G)};G(0);
